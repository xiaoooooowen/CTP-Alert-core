# CTP-Alert-core ğŸš€

**é¡¹ç›®ç®€ä»‹**

CTP-Alert-core æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ C++ æœåŠ¡æ ¸å¿ƒæ¨¡å—ï¼Œä¸“ä¸ºäº‘ç«¯æœŸè´§é¢„è­¦è€Œè®¾è®¡ï¼Œå…·å¤‡å¦‚ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š

- ğŸ“Š è®¢é˜…æœŸè´§è¡Œæƒ…ï¼ˆåŸºäº CTP è¡Œæƒ…æ¥å£ï¼‰
- ğŸ—‚ï¸ ä» MySQL æ•°æ®åº“è¯»å–ç”¨æˆ·é…ç½®çš„é¢„è­¦å•
- â° å®æ—¶ç›‘æ§ï¼Œè‡ªåŠ¨è§¦å‘é€šçŸ¥ï¼ˆæ§åˆ¶å°è¾“å‡º/é‚®ä»¶ï¼‰ï¼Œå¹¶æ›´æ–°æ•°æ®åº“çŠ¶æ€

æœ¬æ¨¡å—ä½œä¸º[æœŸè´§äº‘ç«¯é¢„è­¦ç³»ç»Ÿ](https://github.com/RV64G/FuturesCloudSentinel)çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œå®ç°äº†è¡Œæƒ…æ¥å…¥ã€é¢„è­¦åˆ¤æ–­å’Œæ•°æ®ç®¡ç†ç­‰å…¨æµç¨‹ï¼Œæ”¯æŒçµæ´»çš„å¸‚åœº/æ•°æ®åº“å‚æ•°é…ç½®ï¼Œé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒå’Œæœ¬åœ°å¼€å‘ã€‚

---

## ğŸ“‚ ç›®å½•ç»“æ„åŠå…³é”®æ–‡ä»¶

| æ–‡ä»¶/ç›®å½•                         | è¯´æ˜                         |
| --------------------------------- | ---------------------------- |
| Alert-core/Config.h / Config.cpp  | é…ç½®åŠ è½½é€»è¾‘ï¼ˆç¯å¢ƒå˜é‡ä¼˜å…ˆï¼Œå›é€€è‡³ config.iniï¼‰ |
| Alert-core/MduserHandler.h        | æ ¸å¿ƒï¼šè¡Œæƒ…å¤„ç†ã€é¢„è­¦åˆ¤æ–­ã€æ•°æ®åº“æ“ä½œã€é€šçŸ¥è§¦å‘ |
| Alert-core/config.ini             | ç¤ºä¾‹é…ç½®ï¼ˆå¯ç”¨ç¯å¢ƒå˜é‡è¦†ç›–ï¼‰  |
| Alert-core/main.cpp               | ç¨‹åºå…¥å£ï¼Œå¯åŠ¨æœåŠ¡            |
| Source/                           | CTP SDK åŠå…¶ä»–äºŒæ–¹æ–‡ä»¶       |

---

## âš¡ å¿«é€Ÿå¯åŠ¨ï¼ˆWindows + Visual Studio 2026ï¼‰

> **å‰ç½®æ¡ä»¶**
>
> - ğŸ–¥ï¸ Windows 10/11
> - ğŸ› ï¸ Visual Studio 2026ï¼ˆå·²å®‰è£… C++ æ¡Œé¢å¼€å‘ç¯å¢ƒï¼‰
> - ğŸ—„ï¸ å¯è®¿é—®çš„ MySQL Server
> - ğŸ”— æ­£ç¡®é…ç½® MySQL Connector/C++ çš„ include å’Œé“¾æ¥è·¯å¾„

**æ­¥éª¤å¦‚ä¸‹ï¼š**

1. å…‹éš†é¡¹ç›®

    ```bash
    git clone https://github.com/xiaoooooowen/CTP-Alert-core.git
    ```

2. åœ¨ Visual Studio æ‰“å¼€é¡¹ç›®ï¼Œå¹¶å°† `Alert-core` ä¸‹æºç åŠ å…¥å·¥ç¨‹ã€‚

3. é…ç½®ä¾èµ–ï¼ˆè§ C++ å·¥ç¨‹å±æ€§é¡µï¼‰ï¼š

    - `C/C++ -> é™„åŠ åŒ…å«ç›®å½•`ï¼šæ·»åŠ  MySQL Connector/C++ çš„ `include` è·¯å¾„
    - `é“¾æ¥å™¨ -> é™„åŠ åº“ç›®å½•`ï¼šæ·»åŠ  `lib64/vs14`ï¼ˆæˆ–ä½ çš„ VS ç‰ˆæœ¬ç›®å½•ï¼‰
    - `é“¾æ¥å™¨ -> è¾“å…¥ -> é™„åŠ ä¾èµ–é¡¹`ï¼šæ·»åŠ  `mysqlcppconn.lib` å’Œ `mysqlcppconn8.lib`

4. è®¾ç½®é…ç½®å‚æ•°ï¼ˆæ¨èç”¨ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯æ‰‹åŠ¨ç¼–è¾‘ `config.ini`ï¼‰

5. ç¼–è¯‘è¿è¡Œï¼ˆF5ï¼‰ï¼Œæˆ–åœ¨â€œè°ƒè¯•->ç¯å¢ƒå˜é‡â€é‡Œå¡«å†™å‚æ•°ï¼Œå†å¯åŠ¨è°ƒè¯•

> å‚è€ƒï¼š[VS2022 é…ç½® MySQL C++ Connectorï¼ˆCSDNï¼‰](https://blog.csdn.net/weixin_74027669/article/details/137203874)

---

## âš™ï¸ é…ç½®è¯´æ˜ï¼ˆä¼˜å…ˆçº§ï¼šç¯å¢ƒå˜é‡ > config.ini > é»˜è®¤å€¼ï¼‰

**æ ·ä¾‹ `Alert-core/config.ini`:**

```ini
[Database]
Host=127.0.0.1
Port=3306
User=root
Password=1234
Schema=futurescloudsentinel

[MarketData]
Address=tcp://182.254.243.31:30011
BrokerID=
UserID=
Password=
```

**å¯ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰ï¼š**

- ğŸ› ï¸ è¡Œæƒ…è¿æ¥ï¼š`MD_ADDRESS`ï¼Œ`MD_BROKERID`ï¼Œ`MD_USERID`ï¼Œ`MD_PASSWORD`
- ğŸ—„ï¸ æ•°æ®åº“è¿æ¥ï¼š`DB_HOST`ï¼Œ`DB_PORT`ï¼Œ`DB_USER`ï¼Œ`DB_PASSWORD`ï¼Œ`DB_SCHEMA`

**Windows CMD ç¤ºä¾‹ï¼š**

```cmd
set MD_ADDRESS=tcp://your-md-host:30011
set DB_HOST=192.168.x.x
start Alert-core\bin\Debug\Alert-core.exe
```

**VS è°ƒè¯•ç¯å¢ƒå˜é‡é…ç½®ï¼š**
é¡¹ç›®å±æ€§ -> `Debugging -> Environment`ï¼Œè¾“å…¥ï¼š

```
MD_ADDRESS=tcp://127.0.0.1:30011;DB_HOST=127.0.0.1;DB_USER=root;DB_PASSWORD=1234
```

> âš ï¸ **å®‰å…¨æé†’**ï¼šä¸è¦æŠŠç”Ÿäº§å¯†ç å†™è¿›ä»£ç ä»“åº“ï¼å¼ºçƒˆå»ºè®®ç”¨ç¯å¢ƒå˜é‡æˆ–å®‰å…¨æœåŠ¡ç»Ÿä¸€ç®¡ç†å‡­è¯ã€‚

---

## ğŸ› ï¸ é¡¹ç›®è¿è¡Œæµç¨‹ç®€è¿°

1. ğŸš€ åŠ è½½é…ç½® -> è¿æ¥è¡Œæƒ…å‰ç½®æœº  
2. ğŸ”— è‡ªåŠ¨ç™»å½•ï¼ˆå¦‚æœå·²é…ç½®å‡­è¯ï¼‰  
3. â™»ï¸ å¯åŠ¨åå°çº¿ç¨‹ï¼Œæ¯ 3 ç§’æ‹‰å–ä¸€æ¬¡æ•°æ®åº“ `state=0` çš„å¾…è§¦å‘é¢„è­¦å•  
4. ğŸ“¡ è¡Œæƒ…å›è°ƒæ—¶æ‰§è¡Œé¢„è­¦åˆ¤å®š  
    - å¦‚ï¼šæœ€æ–°ä»·æ ¼ â‰¥ ä¸Šé™ï¼Œâ‰¤ ä¸‹é™ï¼Œæˆ–è¾¾åˆ°å®šæ—¶è§¦å‘ç‚¹  
5. âœ… ç¬¦åˆæ¡ä»¶å³ï¼š
    - æ§åˆ¶å°è¾“å‡ºæ—¥å¿—
    - ğŸ“§ é‚®ä»¶é€šçŸ¥ï¼ˆå¦‚å¯ç”¨ï¼‰
    - ğŸ“ æ•°æ®åº“æ ‡è®°å·²è§¦å‘
    - ğŸ§¹ ä»å†…å­˜ç¼“å­˜ç§»é™¤

> **Tips:** æ”¯æŒé¢„è­¦â€œä»·æ ¼è§¦å‘â€å’Œâ€œå®šæ—¶è§¦å‘â€ä¸¤ç§æ¨¡å¼ã€‚

---

## ğŸ¤” å¸¸è§æ•…éšœæ’æŸ¥

| â“ é—®é¢˜          | ğŸ•µï¸ å¯èƒ½åŸå›             | ğŸ› ï¸ è§£å†³å»ºè®®                                    |
| ----------------- | --------------------- | --------------------------------------------- |
| ä¸èƒ½è¿è¡Œæƒ…å‰ç½®æœº  | åœ°å€/ç½‘ç»œ/é˜²ç«å¢™é—®é¢˜  | æ£€æŸ¥ MD_ADDRESSï¼Œå°è¯• `telnet` ç›®æ ‡ä¸»æœº         |
| ç™»å½•å¤±è´¥         | è´¦æˆ·/å¯†ç é”™è¯¯         | å¯¹ç…§äº¤æ˜“æ‰€æä¾›çš„æµ‹è¯•è´¦å·                        |
| æ— æ³•è¿æ•°æ®åº“      | é…ç½®ã€æœåŠ¡ã€Connectorå¼‚å¸¸ | æ£€æŸ¥é…ç½®ï¼Œä¿è¯ MySQL Connector å’Œè¿œç«¯è®¿é—®æ­£å¸¸   |
| é¢„è­¦æ²¡è§¦å‘        | æ—¶é—´æ ¼å¼é”™è¯¯ã€æ¡ä»¶ä¸æ»¡è¶³ | æ£€æŸ¥æ•°æ®åº“å­—æ®µæ ¼å¼ä¸º `YYYY-MM-DD HH:MM:SS`      |

---

## ğŸŒ æŠ€æœ¯æ¶æ„ä¸äº®ç‚¹

- **ğŸ”§ çµæ´»é…ç½®**ï¼šç¯å¢ƒå˜é‡ä¼˜å…ˆï¼Œå…¼å®¹æœ¬åœ°è°ƒè¯•åŠäº‘ç«¯éƒ¨ç½²
- **ğŸ“ˆ è¡Œä¸šæ ‡å‡†**ï¼šCTP SDK ç›´è¿æœŸè´§å¸‚åœº
- **ğŸ—„ï¸ æ•°æ®åº“é©±åŠ¨**ï¼šMySQL Connector/C++ï¼Œé«˜æ•ˆå®‰å…¨
- **ğŸ”’ çº¿ç¨‹å®‰å…¨**ï¼šè¡Œæƒ…ä¸é¢„è­¦ç¼“å­˜ç”¨ mutex æŠ¤èˆªï¼Œåå°å¾ªç¯å®šæ—¶åŠ è½½
- **ğŸ“¡ å¤šé€šçŸ¥æ¸ é“**ï¼šé€šè¿‡ INotifier æ¥å£æ”¯æŒåç»­æ‰©å±•çŸ­ä¿¡/Webhook
- **ğŸ’ª å®¹é”™å‡†å¤‡**ï¼šè¿æ¥ã€ç™»å½•çŠ¶æ€è¿½è¸ªï¼Œä¸ºåç»­é‡è¿æ‰“ä¸‹åŸºç¡€

---

## âš–ï¸ æŠ€æœ¯é€‰å‹è§£è¯»

| âš™ï¸ ç»„ä»¶          | ğŸ¤” é€‰å‹           | ğŸ› ï¸ ç†ç”±                            |
| --------- | ----------------- | --------------------------------- |
| è¡Œæƒ…æ¥å…¥   | CTP SDK           | å›½å†…æœŸè´§ä¸»æµæ ‡å‡†ï¼Œä½å»¶è¿Ÿã€é«˜å…¼å®¹  |
| æ•°æ®åº“    | MySQL Connector/C++| åŸç”Ÿ C++ æ”¯æŒï¼Œå®‰å…¨é«˜æ•ˆ          |
| å¹¶å‘æ¨¡å‹   | C++11 çº¿ç¨‹+äº’æ–¥é” | é«˜æ€§èƒ½ã€æ— ä¸‰æ–¹ä¾èµ–               |
| é…ç½®åŠ è½½   | INI + ç¯å¢ƒå˜é‡    | ç®€å•å¯é ï¼Œé€‚åˆ CI/CD å’Œå®¹å™¨éƒ¨ç½²   |
| æ—¥å¿—è¾“å‡º   | printfï¼ˆå½“å‰ï¼‰    | ä¾¿äºè°ƒè¯•ï¼Œå»ºè®®ç”Ÿäº§ç”¨ spdlog       |

---

## ğŸ•¹ï¸ æ”¹è¿›å»ºè®®ï¼ˆæ¬¢è¿å‚ä¸ï¼‰

- **å¼‚æ­¥ I/O**ï¼šæ•°æ®åº“ä¸é€šçŸ¥èµ°çº¿ç¨‹æ± ï¼Œé˜²æ­¢å›è°ƒçº¿ç¨‹é˜»å¡
- **æ•°æ®åº“è¿æ¥æ± **ï¼šå‡å°‘é¢‘ç¹åˆ›å»ºé”€æ¯
- **å¼¹æ€§å®¹é”™**ï¼šå¯é…ç½®é‡è¯•æœºåˆ¶ã€ç†”æ–­ã€é€€é¿ç®—æ³•
- **æ—¥å¿—å‡çº§**ï¼šæ¨èé›†æˆ spdlogï¼Œæ”¯æŒæ»šåŠ¨ä¸åˆ†çº§
- **ç›‘æ§é›†æˆ**ï¼šæ”¯æŒ Prometheus æŒ‡æ ‡å¯¼å‡º
- **ç°ä»£åŒ–é…ç½®**ï¼šæ”¯æŒ JSON/YAML æ ¼å¼ï¼ˆå¦‚ nlohmann/jsonï¼‰
- **å®‰å…¨å¢å¼º**ï¼šæœºå¯†äº¤ç”±ä¸“ä¸šå­˜å‚¨ï¼Œä¸æš´éœ²æ˜æ–‡
- **æ ¸å¿ƒå•å…ƒæµ‹è¯•**ï¼šå»ºè®®ç”¨ GoogleTest / Catch2

---

## ğŸ’¡ å¼€å‘æŒ‡å—

1. å…ˆåˆ›å»º Issue æè¿°éœ€æ±‚æˆ– Bug
2. ä» main åˆ†æ”¯æ–°å»ºç‰¹æ€§åˆ†æ”¯
3. å¼€å‘æäº¤ Pull Request
4. PR è¯·ç®€æ˜å†™æ˜æ”¹åŠ¨å†…å®¹å’Œæµ‹è¯•æ–¹å¼
5. æŒ‰ç…§ `.editorconfig` / `CONTRIBUTING.md` è§„èŒƒï¼ˆå¦‚æœ‰ï¼‰

---

## ğŸ“ è®¸å¯è¯ä¸ä½œè€…

- è¯¦è§é¡¹ç›®æ ¹ç›®å½• LICENSE æ–‡ä»¶
- å»ºè®®é‡‡ç”¨ MIT æˆ– Apache-2.0 å¼€æºåè®®

> âœ¨ æœ¬äººé¦–ä¸ª C++ ç‹¬ç«‹é¡¹ç›®ï¼ˆå¾—ç›Šäº Qwen / GitHub Copilot è¾…åŠ©ï¼‰ï¼Œæ¬¢è¿æ‹ç –ã€Starã€Forkï¼

å®Œæ•´é¡¹ç›®è§ï¼š[RV64G/FuturesCloudSentinel](https://github.com/RV64G/FuturesCloudSentinel)
